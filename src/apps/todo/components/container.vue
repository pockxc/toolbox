<template>
  <div class="todo-container">
    <n-button type="primary">基础</n-button>
    <!-- <p class="title"></p> -->
    <div class="input-wrapper">
      <input class="input" placeholder="添加新任务" v-model="newTodo" @keyup.enter="addTodo" />
    </div>
    <div class="todo-list">
      <ul class="todo-list-wrapper">
        <li v-for="todo in todoList" :key="todo" class="todo-list-item">
          <input class="item-checkbox" type="checkbox" />
          <label class="item-name">{{ todo }}</label>
          <button class="item-delete"></button>
        </li>
      </ul>
    </div>
  </div>
</template>
<script lang="ts">
import { defineComponent } from 'vue'
import useTodo from '../hooks/useTodo'

export default defineComponent({
  setup() {
    const { newTodo, todoList, addTodo } = useTodo()
    return { newTodo, todoList, addTodo }
  }
})
</script>
<style lang="less" scoped>
.todo-container {
  padding: 16px 0;
  height: 100%;
  color: #455963;
  .input-wrapper {
    display: flex;
    .input {
      flex: 1;
      border: 0;
      padding: 8px 16px;
      box-shadow: 0 -1px 0 #e2e4ea inset;
      font-size: 16px;
      box-sizing: border-box;
      &::placeholder {
        color: #a8b5bb;
      }
      &:focus {
        border: 0;
        box-shadow: 0 -1px 0 #bdcdd6 inset;
      }
    }
  }
  .todo-list {
    height: ~'calc(100% - 41px)';
    &-wrapper {
      height: 100%;
      overflow: auto;
    }
    &-item {
      padding: 8px 16px;

      display: flex;
      align-items: center;
      &:hover > .item-delete {
        display: block;
      }
      &:not(:first-child) {
        border-top: 1px solid #eef0f5;
      }
      .item-name {
        flex: 1;
      }
      .item-checkbox {
        appearance: none;
        width: 18px;
        height: 18px;
        cursor: pointer;
        border: 2px solid #bbbdc7;
        border-radius: 50%;
        background-color: #fff;
        margin-right: 10px;
        position: relative;
      }

      .item-checkbox:checked {
        background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' width='405.272' height='405.272'%3e%3cpath d='M393.401 124.425L179.603 338.208c-15.832 15.835-41.514 15.835-57.361 0L11.878 227.836c-15.838-15.835-15.838-41.52 0-57.358 15.841-15.841 41.521-15.841 57.355-.006l81.698 81.699L336.037 67.064c15.841-15.841 41.523-15.829 57.358 0 15.835 15.838 15.835 41.514.006 57.361z' fill='%23fff'/%3e%3c/svg%3e");
        background-size: 10px;
        background-color: #4acea3;
        border-color: #38bb90;
        background-repeat: no-repeat;
        background-position: center;
      }
      .item-delete {
        margin-left: 10px;
        border: 0;
        width: 18px;
        height: 18px;
        padding: 0;
        overflow: hidden;
        background-color: transparent;
        background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg fill='%23dc4771' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 174.239 174.239'%3e%3cpath d='M87.12 0C39.082 0 0 39.082 0 87.12s39.082 87.12 87.12 87.12 87.12-39.082 87.12-87.12S135.157 0 87.12 0zm0 159.305c-39.802 0-72.185-32.383-72.185-72.185S47.318 14.935 87.12 14.935s72.185 32.383 72.185 72.185-32.384 72.185-72.185 72.185z'/%3e%3cpath d='M120.83 53.414c-2.917-2.917-7.647-2.917-10.559 0L87.12 76.568 63.969 53.414c-2.917-2.917-7.642-2.917-10.559 0s-2.917 7.642 0 10.559l23.151 23.153-23.152 23.154a7.464 7.464 0 000 10.559 7.445 7.445 0 005.28 2.188 7.437 7.437 0 005.28-2.188L87.12 97.686l23.151 23.153a7.445 7.445 0 005.28 2.188 7.442 7.442 0 005.28-2.188 7.464 7.464 0 000-10.559L97.679 87.127l23.151-23.153a7.465 7.465 0 000-10.56z'/%3e%3c/svg%3e");
        background-repeat: no-repeat;
        background-size: cover;
        cursor: pointer;
        display: none;
      }
    }
  }
}
</style>
